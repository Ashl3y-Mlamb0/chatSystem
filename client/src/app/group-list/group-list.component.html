<div class="main-container">
  <h2>Groups</h2>

  <ul class="group-list">
    <li *ngFor="let group of groups" class="group-item">
      <div class="group-details">
        <div class="group-name">
          {{ group.name }}
        </div>

        <!-- Show admin label if the user is a superAdmin or groupAdmin -->
        <div
          class="group-admin-label"
          *ngIf="
            authService.hasRole('superAdmin') ||
            authService.isGroupAdmin(group._id)
          "
        >
          (Admin)
        </div>

        <!-- Show request access button or pending message -->
        <div class="group-actions">
          <!-- If the user is already a member, show "Joined" -->
          <span class="group-joined-label" *ngIf="isGroupMember(group)">
            (Joined)
          </span>

          <!-- If the user has a pending request, show "Request Pending" -->
          <span class="group-pending-label" *ngIf="hasPendingRequest(group)">
            (Request Pending)
          </span>

          <!-- Show request access button if no pending request and user is not a member -->
          <button
            *ngIf="
              !isGroupMember(group) &&
              !hasPendingRequest(group) &&
              !authService.hasRole('superAdmin') &&
              !authService.hasRole('groupAdmin')
            "
            (click)="requestAccess(group)"
          >
            Request Access
          </button>
        </div>
      </div>
    </li>
  </ul>
</div>
